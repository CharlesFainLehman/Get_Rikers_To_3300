hc %>%
filter(BIAS_DESC == "Anti-Asian")
hc %>%
filter(BIAS_DESC == "Anti-Asian") %>%
count(OFFENDER_RACE)
hc %>%
filter(BIAS_DESC == "Anti-Asian") %>%
count(OFFENDER_RACE) %>%
mutate(p = n/sum(n))
hc %>%
filter(BIAS_DESC == "Anti-Asian",
OFFENDER_RACE != "") %>%
count(OFFENDER_RACE) %>%
mutate(p = n/sum(n))
hc %>%
filter(BIAS_DESC == "Anti-Asian",
OFFENDER_RACE != "") %>%
count(OFFENDER_RACE) %>%
mutate(p = scales::percent(n/sum(n)))
theme_MI <- function() {
theme_minimal() +
theme(panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
text = element_text(family = "Helvetica", color = "black"),
panel.background = element_blank(),
panel.border = element_blank(),
axis.text = element_text(family = "Helvetica", color = "black"),
axis.line = element_blank(),
axis.ticks = element_line())
}
MI_palette <- c('#9DCDED', '#55A5DA', "#5986A3", "#8A55DA", "#1C618E", '#5563DA')
rm(beacon_colors)
rm(theme_beacon())
rm(theme_beacon
)
ak <- read.csv(sep = "\t", "MI/Briefs/Rikers 3300/dat/ICPSR_31261/DS0001/31261-0001-Data.tsv")
head(ak)
library(tidyverse)
ak %>% filter(grepl("RICHMOND", county))
ak %>% filter(grepl("ARTHUR KILL", faclname))
ak %>% filter(grepl("FULTON", faclname))
View(theme_MI)
View(theme_MI)
leoka <- readRDS("Downloads/ucr_leoka_yearly_1960_2020_rds/leoka_yearly_1960_2020.rds")
head(leoka)
leoka %>% filter(grepl("portland", agency_name))
library(tidyverse)
theme_set(theme_minimaler())
library(tidyverse)
theme_set(theme_minimaler())
leoka %>% filter(grepl("portland", agency_name))
leoka %>% filter(grepl("portland", agency_name), state == "OR")
leoka %>% filter(grepl("portland", agency_name), state_abb == "OR")
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI9: OR0260200
#msa: 685
leoka %>%
filter(year == 2020, msa == 685)
leoka %>%
filter(msa == 685) %>%
count(year)
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
leoka %>%
filter(msa == 685) %>%
count(year) %>%
ggplot(aes(x=year, y=n)) +
geom_col()
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
leoka %>%
filter(msa == 685) %>%
count(year) %>%
ggplot(aes(x=year, y=n)) +
geom_col() +
labs(title = "Number of Agencies in LEOKA Data", subtitle = "MSA 685, 1960 - 2020")
ggsave("Desktop/plot1.png", width = 8, height = 5, bg = 'white')
leoka %>%
filter(msa == 685, year == 1992) %>%
pull(ori) %>% unique()
leoka %>%
filter(msa == ori %in% departments) %>%
mutate(portland = ori == OR02602) %>%
count(portland, year, wt = total_employees_officers)
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
departments <- leoka %>%
filter(msa == 685, year == 1992) %>%
pull(ori) %>% unique()
leoka %>%
filter(msa == ori %in% departments) %>%
mutate(portland = ori == OR02602) %>%
count(portland, year, wt = total_employees_officers)
source("~/.active-rstudio-document", echo=TRUE)
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
departments <- leoka %>%
filter(msa == 685, year == 1992) %>%
pull(ori) %>% unique()
leoka %>%
filter(msa == ori %in% departments) %>%
mutate(portland = ori == 'OR02602') %>%
count(portland, year, wt = total_employees_officers)
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
departments <- leoka %>%
filter(msa == 685, year == 1992) %>%
pull(ori) %>% unique()
leoka %>%
filter(msa == ori %in% departments) %>%
mutate(portland = ori == 'OR02602')
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
departments <- leoka %>%
filter(msa == 685, year == 1992) %>%
pull(ori) %>% unique()
leoka %>%
filter(ori %in% departments) %>%
mutate(portland = ori == 'OR02602') %>%
count(portland, year, wt = total_employees_officers)
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
departments <- leoka %>%
filter(msa == 685, year == 1992) %>%
pull(ori) %>% unique()
leoka %>%
filter(ori %in% departments, year >= 1992) %>%
mutate(portland = ori == 'OR02602') %>%
count(portland, year, wt = total_employees_officers) %>%
ggplot(aes(x=year, y=n, color = portland)) +
geom_col()
#ggsave("Desktop/plot1.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
departments <- leoka %>%
filter(msa == 685, year == 1992) %>%
pull(ori) %>% unique()
leoka %>%
filter(ori %in% departments, year >= 1992) %>%
mutate(portland = ori == 'OR02602') %>%
count(portland, year, wt = total_employees_officers) %>%
ggplot(aes(x=year, y=n, color = portland)) +
geom_line(()
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
departments <- leoka %>%
filter(msa == 685, year == 1992) %>%
pull(ori) %>% unique()
leoka %>%
filter(ori %in% departments, year >= 1992) %>%
mutate(portland = ori == 'OR02602') %>%
count(portland, year, wt = total_employees_officers) %>%
ggplot(aes(x=year, y=n, color = portland)) +
geom_line()
#ggsave("Desktop/plot1.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
departments <- leoka %>%
filter(msa == 685, year == 1960) %>%
pull(ori) %>% unique()
leoka %>%
filter(ori %in% departments) %>%
mutate(portland = ori == 'OR02602') %>%
count(portland, year, wt = total_employees_officers) %>%
ggplot(aes(x=year, y=n, color = portland)) +
geom_line()
#ggsave("Desktop/plot1.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
theme_set(theme_minimaler())
#Portland ORI: OR02602
#msa: 685
departments <- leoka %>%
filter(msa == 685, year == 1960) %>%
pull(ori) %>% unique()
leoka %>%
filter(ori %in% departments) %>%
mutate(portland = ori == 'OR02602') %>%
count(portland, year, wt = total_employees_officers) %>%
ggplot(aes(x=year, y=n, color = portland)) +
geom_line()
ggsave("Desktop/plot2.png", width = 8, height = 5, bg = 'white')
census <- haven::read_dta("Downloads/ICPSR_38323/DS0001/38323-0001-Data.rda")
census <- readRDA("Downloads/ICPSR_38323/DS0001/38323-0001-Data.rda")
census <- load("Downloads/ICPSR_38323/DS0001/38323-0001-Data.rda")
head(da38323.0001)
library(tidyverse)
filter(da38323.0001, grepl("Rikers", facname))
filter(da38323.0001, grepl("Rikers", FACNAME))
filter(da38323.0001, grepl("new york", FACNAME))
filter(da38323.0001, grepl("new york", FACNAME, ignore.case = T))
setwd("MI/Briefs/Rikers 3300/")
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2], size = 2) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
View(closures)
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
scale_x_date(date_breaks = '1 year') +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
scale_x_date(date_breaks = '1 year', date_labels = "$Y") +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
scale_x_date(date_breaks = '1 year', date_labels = "%Y") +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
scale_x_date(date_breaks = '1 year', date_labels = "%Y", limits = c(NA, as.Date("2022-12-31"))) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
scale_x_date(date_breaks = '1 year', date_labels = "%Y", limits = c(NA, as.Date("2022-12-31"))) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
scale_x_date(date_breaks = '1 year', date_labels = "%Y", limits = c(c(as.Date("2016-06-02"), as.Date("2022-12-31")))) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
scale_x_date(date_breaks = '1 year', date_labels = "%Y", limits = c(c(as.Date("2016-06-02"), as.Date("2021-12-31")))) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
scale_x_date(date_breaks = '1 year', date_labels = "%Y", limits = c(c(as.Date("2016-06-02"), as.Date("2022-12-31")))) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
scale_x_date(date_breaks = '1 year', date_labels = "%Y", limits = c(c(as.Date("2016-06-02"), as.Date("2022-11-30")))) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
scale_x_date(date_breaks = '1 year', date_labels = "%Y", limits = c(c(as.Date("2016-06-02"), as.Date("2022-10-31")))) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
library(tidyverse)
library(ggrepel)
theme_set(theme_MI())
#rikers <- vroom::vroom("dat/combined.csv")
rikers.count <- count(rikers, date)
date.labels <- filter(rikers.count, date %in% c(as.Date("2017-04-01"), as.Date("2018-10-01"), as.Date("2019-10-01"), as.Date("2019-11-01"), as.Date("2020-01-01"), as.Date("2020-03-18"), as.Date("2020-07-02"), as.Date("2021-09-17"), as.Date("2022-03-01"), as.Date("2022-04-07"))) %>%
mutate(label = c("Lippman Commission's\nfirst report", "Raise the Age\nfor 16-year-olds", "Raise the Age\nfor 17-year-olds", "Judges begin\nimplementing Bail Reform", "Bail/Discovery\nReform in effect", "NYS COVID shutdown", "First Bail\nReform amendments", "Less is\nMore signed", "Less is More\nin effect", "Second Bail Reform amendments"))
closures <- data.frame(start = c(as.Date("2020-03-18"), as.Date("2020-11-16")), end = c(as.Date("2020-08-10"), as.Date("2021-03-22")), max = c(Inf, Inf), min = c(-Inf, -Inf))
rikers.count %>%
ggplot() +
geom_rect(data = closures, aes(xmin = start, xmax = end, ymin = min, ymax = max), alpha = 0.5, fill = MI_palette[1]) +
geom_line(aes(x=date, y=n), color = MI_palette[2]) +
geom_point(data = date.labels, aes(x=date, y=n), shape = 21, color = MI_palette[2], fill = 'white', size = 2) +
geom_text_repel(data = date.labels, aes(x = date, y=n, label = label), size = 2, min.segment.length = 0, box.padding = 0.5) +
geom_hline(yintercept = 3300, linetype = 2) +
annotate("text", x = as.Date("2016-06-03"), y = 3450, label = "3,300", size = 3) +
scale_y_continuous(labels = scales::comma) +
annotate("text", x = as.Date("2020-09-20"), y = 9000, label = "Grand Jury\nhearings\nsuspended", size = 2) +
theme(axis.title = element_blank())
ggsave("img/plot2.png", width = 8, height = 5, bg = 'white')
head(rikers.count)
slice_min(rikers.count)
slice_min(rikers.count, order_by = n, n = 1)
tail(rikers.count)
setwd("Get_Rikers_To_3300/")
rsconnect::deployApp(".")
